<!--
/************************ LICENCE ***************************
* 	This file is part of <SourceData SmartFigure frontend code to search and navigate the SourceData resource>
*     Copyright (C) <2016>  EMBO and Swiss Institute of Bioinformatics
*
*     This program is free software: you can redistribute it and/or modify
*     it under the terms of the GNU Affero General Public License as
*     published by the Free Software Foundation, either version 3 of the
*     License, or (at your option) any later version.
*
*     This program is distributed in the hope that it will be useful,
*     but WITHOUT ANY WARRANTY; without even the implied warranty of
*     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*     GNU Affero General Public License for more details.
*
*     You should have received a copy of the GNU Affero General Public License
*    along with this program.  If not, see <http://www.gnu.org/licenses/>
*
*****************************************************************/
-->

<!--FORM -->

<sd-form search-params = 'searchParams' on-form-submit = 'formSubmit()'></sd-form>

<!--RESULTS -->
<div class='container-fluid' ng-if="searchParams.result" style="margin-top: 20px">

    <div ng-if='searchParams.result && searchParams.done '>

        <!--FILTERS -->
        <div class="panel panel-primary" style="background-color: #eeeeee" >
            <div class="panel-body">
                <div class="row"> <p style="padding-left:15px" compile="searchParams.summary.phrase" ></p> </div>
                <div class="row" ng-show="searchParams.summary.papers" >
                    <div ng-if="!searchParams.result.shortestPath.length">
                        <div class="col-sm-2">
                            <button class="btn btn-primary btn-sm" ng-show="filtercollection.subitems.length==0" ng-click="filterInit();firstClick=1;" > Filter results </button>
                            <button class="btn btn-primary btn-sm" ng-show="firstClick==1 && filtercollection.subitems.length>0" ng-click="collapsed_filt=!collapsed_filt" > <i ng-class="{'fa fa-angle-up':!collapsed_filt,'fa fa-angle-down':collapsed_filt}"></i> Filter results </button>
                        </div>
                        <div class="col-sm-10" ng-show="!collapsed_filt">
                            <div ng-repeat="subitem in filtercollection.subitems">
                                <filter-results style="padding: 20px;"
                                                parentindex="$index"
                                                render = "1"
                                                remove-filter-item="removeFilterItem(i,type, currFilt)"
                                                add-new-filter-item="addNewFilterItem()"
                                                apply-filter="applyFilter(currFilt)"
                                                track-selections="trackSelections(currFilt)">
                                </filter-results>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


        <direct-search-result type='direct'
                              ng-repeat='(idx, result) in searchParams.displayedResult'
                              index='idx'
                              result='result'>
        </direct-search-result>
        <path-search-result type='path' ng-repeat='step in searchParams.result.shortestPath'
                            ng-if='searchParams.result.direct.length == 0 && searchParams.action == "connect"'
                            step='step' first='{{$first}}'>

        </path-search-result>

        <div ng-if='!searchParams.result.direct.length && !searchParams.result.shortestPath.length && searchParams.done'
             class='alert alert-info'>Sorry, no result found.
        </div>
    <div ng-if='searchParams.loading' class='alert alert-info'>Searching. Please wait...</div>

</div>


